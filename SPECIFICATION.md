# Тестовое задание, PHP разработчик

Дано: гипотетическая децентрализованная система, каждый компонент которой является микросервисом, а общение между компонентами инфраструктуры происходит по API.


Ваша задача: создать прототип микросервиса (назовем его “наносервис”), обеспечивающий эмуляцию отправки сообщений в популярные сервисы instant messaging (Viber, Telegram, What’s App).


Приложение должно быть обладать следующими возможностями:

прием входящих запросов на отправку сообщений и регистрация во внутренней очереди событий;

осуществление отправки полученных событий по расписанию;

учет вероятности неудачных попыток доставки сообщений конечному получателю;

беспрепятственная отправка входящих запросов при наличии в очереди неотправленных сообщений;

исключение возможности многократной отправки одного и того же сообщения одному получателю;

возможность отправки одного сообщения нескольким получателям на несколько мессенджеров в рамках одного входящего запроса на API.


Сервис должен уметь классифицировать запросы по типу мессенджера, любой запрос должен предусматривать наличие идентификатора получателя и тело сообщения. Обязательные параметры в теле сообщения должны проходить валидацию, отправитель запроса должен уведомляться об ошибках.


Структуру и формат входящих запросов и ответов, а также потребность в каких-то дополнительных параметрах, необходимых для функционирования сервиса, оставляем на ваше усмотрение.


Сервис должен уметь понимать, что запрос приходит от верифицированного, доверенного отправителя, и не является попыткой фальсификации. Механизм верификации оставляем на ваше усмотрение.


Язык реализации - PHP7. Хранилище для организации очередей, другие технологии или инструменты (фреймворки и т.п.) - на ваше усмотрение. Выбор надо обосновать.


Необходимо прислать: код системы, инструкцию для развертывания и запуска, любые иные сопроводительные документы на ваше усмотрение (структура и описание API, какая-то иная документация и т.п.).


Сервис не должен осуществлять фактическую отправку сообщений в мессенджеры! Нам не принципиально наличие у вас знаний устройства протоколов передачи данных в Telegram или иной сервис, и не требуется интеграция соответствующих решений (самописных или уже существующих) в код разрабатываемого прототипа.


Написанный вами код не будет работать в “продакшене”. Нам необходимо оценить имеющиеся у вас навыки программирования и общий подход к дизайну подобных систем.


Срок выполнения: 2-3 дня.